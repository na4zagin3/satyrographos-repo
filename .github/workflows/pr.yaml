name: Pull Request Flow

on:
  pull_request:
    types: opened

jobs:
  notify:
    name: Notify snapshot update
    runs-on: ubuntu-latest
    steps:
      - name: comment PR
        uses: actions/github-script@v2
        env:
          github-token: ${{secrets.GITHUB_TOKEN}}
        with:
          script: |
            github.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: `
            ðŸŽ‰ðŸŽ‰ðŸŽ‰ Thank you for sending a PR!

            If this PR is to add new or updated SATySFi libraries, I would like you to update package snapshots for automation tests.

            - If your library supports the latest develop version of SATySFi, post a comment

              \`\`\`
              #snapshot/update
              develop
              \`\`\`

            - If your library supports SATySFi 0.0.5, post a comment

              \`\`\`
              #snapshot/update
              stable 0.0.5
              \`\`\`

            - If your library supports SATySFi 0.0.4, post a comment

              \`\`\`
              #snapshot/update
              stable 0.0.4
              \`\`\`

            You can combine those directions in one comment:

            \`\`\`
            #snapshot/update
            develop
            stable 0.0.5
            \`\`\`

            Thanks!
            `
            })
